<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABC to Sheet Music with Flute Tab</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <script src="https://cdn.jsdelivr.net/npm/abcjs@6.2.2/dist/abcjs-basic-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/abcjs@6.2.2/dist/abcjs-audio.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>üéµ ABC to Sheet Music with Flute Tab</h1>
        <p class="download-link">
            <a href="https://github.com/etnt/whistle-tab/releases" target="_blank">‚¨áÔ∏è Download for offline use</a>
        </p>
        
        <div class="input-section">
            <h2>Enter ABC Notation</h2>
            <textarea id="abc-input" placeholder="Enter your ABC notation here..."></textarea>
            <div class="controls">
                <label id="transpose-control">
                    Transpose for:
                    <select id="transpose-key">
                        <option value="0">D whistle</option>
                        <option value="-2">C whistle</option>
                        <option value="1">Eb whistle</option>
                        <option value="3">F whistle</option>
                        <option value="-7">G whistle</option>
                        <option value="-5">A whistle</option>
                        <option value="-4">Bb whistle</option>
                    </select>
                </label>
                <label class="tab-type-control">
                    <input type="checkbox" id="fiddle-tab-checkbox">
                    Fiddle Tab
                </label>
                <label class="speed-control">
                    Speed:
                    <input type="range" id="speed-slider" min="50" max="150" value="100" step="5">
                    <span id="speed-value">100%</span>
                </label>
                <button id="play-btn" title="Play">‚ñ∂Ô∏è Play</button>
                <button id="stop-btn" title="Stop" disabled>‚èπÔ∏è Stop</button>
                <button id="export-btn">Export as MIDI</button>
                <button id="export-pdf-btn">Export as PDF</button>
            </div>
        </div>

        <div class="output-section">
            <h2 id="output-title">Sheet Music with Flute Tablature</h2>
            <div id="paper"></div>
            <div id="audio-controls" class="audio-controls"></div>
            <div id="tablature" style="display:none;"></div>
        </div>

        <div class="tune-library-section">
            <h2>Tune Library</h2>
            <div class="tune-library-controls">
                <select id="tune-select">
                    <option value="">-- Select a tune --</option>
                </select>
                <button id="load-tune-btn" disabled>Load Tune</button>
            </div>
        </div>

        <div class="help-section" id="flute-legend">
            <h2>Flute Tablature Legend</h2>
            <div class="legend">
                <div class="legend-item">
                    <div class="hole filled"></div>
                    <span>‚óè = Covered hole</span>
                </div>
                <div class="legend-item">
                    <div class="hole open"></div>
                    <span>‚óã = Open hole</span>
                </div>
                <div class="legend-item">
                    <div class="hole half"></div>
                    <span>‚óê = Half-covered hole</span>
                </div>
                <div class="legend-item">
                    <span>+ = Octave up (blow harder)</span>
                </div>
            </div>
        </div>

        <div class="help-section" id="fiddle-legend" style="display: none;">
            <h2>Fiddle Tablature Legend</h2>
            <div class="legend fiddle-legend">
                <p class="legend-intro">Format: <strong>String + Finger</strong> (e.g., D1 = D string, 1st finger)</p>
                <div class="legend-strings">
                    <div class="legend-item">
                        <span class="string-label" style="color: #009E73;">E</span>
                        <span>= 1st string (highest)</span>
                    </div>
                    <div class="legend-item">
                        <span class="string-label" style="color: #CC79A7;">A</span>
                        <span>= 2nd string</span>
                    </div>
                    <div class="legend-item">
                        <span class="string-label" style="color: #E69F00;">D</span>
                        <span>= 3rd string</span>
                    </div>
                    <div class="legend-item">
                        <span class="string-label" style="color: #0072B2;">G</span>
                        <span>= 4th string (lowest)</span>
                    </div>
                </div>
                <div class="legend-fingers">
                    <div class="legend-item"><span>0</span> = Open string</div>
                    <div class="legend-item"><span>1</span> = 1st finger</div>
                    <div class="legend-item"><span>2</span> = 2nd finger</div>
                    <div class="legend-item"><span>3</span> = 3rd finger</div>
                    <div class="legend-item"><span>4</span> = 4th finger</div>
                    <div class="legend-item"><span>L</span> = Low (half-step back, e.g., AL2 = low 2nd finger on A)</div>
                </div>
            </div>
        </div>

        <footer class="site-footer">
            <a href="https://github.com/etnt/whistle-tab" target="_blank">View on GitHub</a>
        </footer>
    </div>

    <script src="flute-tab.js"></script>
    <script src="fiddle-tab.js"></script>
    <script src="tunes-index.js"></script>
    <script src="app.js"></script>
</body>
</html>
